<!DOCTYPE html>
<html lang="it">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sniper Duel - 1v1 FPS</title>
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <!-- Main Menu -->
  <div id="main-menu" class="screen active">
    <div class="menu-container">
      <h1 class="game-title">SNIPER DUEL</h1>
      <p class="game-subtitle">1v1 Tactical Combat</p>

      <div class="menu-inputs">
        <input type="text" id="player-nickname" placeholder="Insert Nickname" maxlength="15" class="code-input">

        <div class="class-selection-container" style="margin-top: 10px;">
          <label style="color: #00ffff; font-size: 14px; margin-right: 10px;">CLASS:</label>
          <select id="player-class-select" class="code-input" style="width: auto; display: inline-block;">
            <option value="SNIPER">Sniper (High Dmg/Acc)</option>
            <option value="RIFLE">Rifle (Balanced)</option>
            <option value="SMG">SMG (Mobile)</option>
          </select>
        </div>
      </div>
      <div class="menu-buttons">
        <button id="create-match-btn" class="btn btn-primary">Create Match</button>
        <button id="play-vs-bot-btn" class="btn btn-bot">PLAY VS BOT</button>
        <button id="join-match-btn" class="btn btn-secondary">Join Match</button>
        <button id="settings-btn" class="btn btn-tertiary">Settings</button>
      </div>
    </div>
  </div>

  <!-- Join Match Screen -->
  <div id="join-screen" class="screen">
    <div class="menu-container">
      <h2>Join Match</h2>
      <input type="text" id="join-nickname" placeholder="Insert Your Nickname" maxlength="15" class="code-input"
        style="margin-bottom: 10px;">

      <div class="class-selection-container" style="margin-bottom: 10px;">
        <select id="join-class-select" class="code-input" style="width: 100%;">
          <option value="SNIPER">Sniper (High Dmg/Acc)</option>
          <option value="RIFLE">Rifle (Balanced)</option>
          <option value="SMG">SMG (Mobile)</option>
        </select>
      </div>

      <input type="text" id="invite-code-input" placeholder="Enter 6-digit code" maxlength="6" class="code-input">
      <div class="menu-buttons">
        <button id="join-confirm-btn" class="btn btn-primary">Join</button>
        <button id="join-back-btn" class="btn btn-secondary">Back</button>
      </div>
      <p id="join-error" class="error-message"></p>
    </div>
  </div>

  <!-- Lobby Screen -->
  <div id="lobby-screen" class="screen">
    <div class="menu-container">
      <h2>Waiting for Opponent...</h2>
      <div class="invite-code-display">
        <p>Invite Code:</p>
        <h1 id="lobby-code" class="code-display">------</h1>
        <button id="copy-code-btn" class="btn btn-small">Copy Code</button>
      </div>
      <div class="lobby-settings">
        <label><input type="checkbox" id="lobby-infinite-ammo"> Infinite Ammo</label>
        <div class="setting-item">
          <label>Movement Speed: <span id="lobby-speed-value">1.0</span></label>
          <input type="range" id="lobby-speed-input" min="0.5" max="3.0" step="0.1" value="1.0">
        </div>
        <div class="setting-item">
          <label>Jump Level: <span id="lobby-jump-value">1.0</span></label>
          <input type="range" id="lobby-jump-input" min="0.5" max="3.0" step="0.1" value="1.0">
        </div>

        <!-- Bot Settings (Visible only in VS BOT mode) -->
        <div id="bot-settings-section" class="bot-settings-section hidden">
          <hr style="border: 0; border-top: 1px solid #333; margin: 15px 0;">
          <h3>BOT Settings</h3>
          <div class="setting-item">
            <label>Bot Difficulty:</label>
            <select id="lobby-bot-difficulty" class="code-input">
              <option value="FACILE">Facile</option>
              <option value="MEDIO" selected>Medio</option>
              <option value="DIFFICILE">Difficile</option>
              <option value="VETERANO">Veterano</option>
            </select>
          </div>
          <div class="setting-item">
            <label>Number of Bots: <span id="lobby-bot-count-value">4</span></label>
            <input type="range" id="lobby-bot-count-input" min="1" max="11" step="1" value="4">
          </div>
          <div class="setting-item">
            <label>Bot Mode:</label>
            <select id="lobby-bot-mode" class="code-input">
              <option value="COOP_BOT">Co-op (Players vs Bots)</option>
              <option value="DEATHMATCH_BOT">Deathmatch (Free For All)</option>
            </select>
          </div>
          <div class="setting-item">
            <label>Score Limit: <span id="lobby-bot-score-value">10</span></label>
            <input type="range" id="lobby-bot-score-input" min="5" max="50" step="5" value="10">
          </div>
          <div class="setting-item">
            <label>Time Limit: <span id="lobby-bot-time-value">180</span>s</label>
            <input type="range" id="lobby-bot-time-input" min="60" max="600" step="60" value="180">
          </div>
        </div>
        <p style="color: #00ffff; margin-top: 10px;">Mode: Infinite Deathmatch</p>
      </div>
      <p class="lobby-status" id="lobby-status">Waiting for player to join...</p>
      <div class="menu-buttons">
        <button id="lobby-start-btn" class="btn btn-primary hidden">Start Match</button>
        <button id="lobby-cancel-btn" class="btn btn-secondary">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Settings Screen -->
  <div id="settings-screen" class="screen">
    <div class="menu-container">
      <h2>Settings</h2>
      <div class="settings-group">
        <label>Mouse Sensitivity: <span id="sensitivity-value">1.0</span></label>
        <input type="range" id="sensitivity-slider" min="0.1" max="3.0" step="0.1" value="1.0">
      </div>
      <div class="settings-group">
        <label>Master Volume: <span id="volume-value">100%</span></label>
        <input type="range" id="volume-slider" min="0" max="100" step="5" value="100">
      </div>
      <div class="settings-group">
        <label>
          <input type="checkbox" id="fullscreen-toggle">
          Fullscreen
        </label>
      </div>
      <button id="settings-back-btn" class="btn btn-primary">Back</button>
    </div>
  </div>

  <!-- Game HUD -->
  <div id="game-hud" class="hidden">
    <!-- Crosshair -->
    <div id="crosshair" class="crosshair"></div>

    <!-- Hit Marker -->
    <div id="hit-marker" class="hit-marker hidden"></div>

    <!-- Top Bar -->
    <div class="hud-top">
      <div id="leaderboard" class="leaderboard">
        <!-- Dynamically populated -->
      </div>
      <div class="mode-info">
        DEATHMATCH
      </div>
    </div>

    <!-- Kill Feed -->
    <div id="kill-feed" class="kill-feed"></div>

    <!-- Control Hints -->
    <div class="control-hints">
      <div class="hint-item">ESC/TAB - Menu</div>
      <div class="hint-item">SHIFT - Run</div>
      <div class="hint-item">2x SHIFT - Sprint</div>
      <div class="hint-item">C - Slide</div>
    </div>

    <!-- Bottom Left - Player Stats -->
    <div class="hud-bottom-left">
      <div class="health-bar">
        <div class="health-fill" id="health-fill"></div>
        <span id="health-text">100</span>
      </div>
      <div class="ammo-display">
        <span id="current-ammo" class="ammo-current">5</span>
        <span class="ammo-separator">/</span>
        <span id="reserve-ammo" class="ammo-reserve">20</span>
      </div>
    </div>

    <!-- Scope Overlay -->
    <div id="scope-overlay" class="scope-overlay hidden">
      <div class="scope-reticle"></div>
    </div>

    <!-- Damage Indicator -->
    <div id="damage-indicator" class="damage-indicator hidden"></div>

    <!-- Pause Menu -->
    <div id="pause-menu" class="pause-menu hidden">
      <div class="pause-overlay"></div>
      <div class="pause-content">
        <div class="pause-header">
          <h1>MENU</h1>
          <button id="pause-close-btn" class="pause-close">âœ•</button>
        </div>

        <div class="pause-section">
          <h3>Impostazioni Video</h3>
          <div class="setting-item">
            <label>Campo Visivo (FOV): <span id="pause-fov-value">65</span>Â°</label>
            <input type="range" id="pause-fov" min="50" max="110" step="5" value="65">
          </div>
          <div class="setting-item">
            <label>
              <input type="checkbox" id="pause-fullscreen" checked disabled>
              Schermo Intero (Forzato)
            </label>
          </div>
        </div>

        <div class="pause-section">
          <h3>Controlli</h3>
          <div class="setting-item">
            <label>SensibilitÃ  Mouse: <span id="pause-sensitivity-value">1.0</span></label>
            <input type="range" id="pause-sensitivity" min="0.1" max="3.0" step="0.1" value="1.0">
          </div>
        </div>

        <div class="pause-section">
          <h3>Audio</h3>
          <div class="setting-item">
            <label>Volume Generale: <span id="pause-volume-value">100</span>%</label>
            <input type="range" id="pause-volume" min="0" max="100" step="5" value="100">
          </div>
        </div>

        <div class="pause-actions">
          <button id="pause-resume-btn" class="btn btn-primary pause-btn-large">â†© RIPRENDI PARTITA</button>
          <button id="pause-exit-btn" class="btn btn-danger pause-btn-secondary">ðŸšª ESCI DALLA PARTITA</button>
        </div>

        <div class="pause-footer">
          <p>Premi ESC per chiudere il menu</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Round End Screen -->
  <div id="round-end-screen" class="overlay-screen hidden">
    <div class="overlay-content">
      <h2 id="round-result">VICTORY</h2>
      <p id="round-details">You eliminated the enemy</p>
      <p class="next-round-timer">Next round in <span id="next-round-countdown">5</span>s</p>
    </div>
  </div>

  <!-- Match End Screen -->
  <div id="match-end-screen" class="overlay-screen hidden">
    <div class="overlay-content">
      <div class="result-title" id="match-result">VICTORY</div>
      <div class="match-score" id="final-score-display">3 - 1</div>
      <div class="menu-buttons">
        <button id="return-menu-btn" class="menu-btn secondary">MAIN MENU</button>
      </div>
    </div>
  </div>

  <!-- Game Start Screen -->
  <div id="game-start-screen" class="overlay-screen hidden">
    <div class="overlay-content">
      <h2>MATCH READY</h2>
      <p>Click below to enter combat</p>
      <button id="start-combat-btn" class="btn btn-primary start-btn">ENTER COMBAT</button>
    </div>
  </div>

  <!-- Loading Screen -->
  <div id="loading-screen" class="overlay-screen">
    <div class="overlay-content">
      <h2>Loading...</h2>
      <div class="loading-spinner"></div>
    </div>
  </div>

  <!-- Game Canvas -->
  <canvas id="game-canvas"></canvas>

  <!-- Scripts -->
  <script type="importmap">
{
  "imports": {
    "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
    "socket.io-client": "https://cdn.socket.io/4.6.1/socket.io.esm.min.js"
  }
}
</script>
  <script type="module" src="/js/main.js"></script>
</body>

</html>